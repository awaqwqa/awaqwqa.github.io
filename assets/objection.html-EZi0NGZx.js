import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as t,o,c,a,b as n,d as s,e as p}from"./app-4DI25i_s.js";const l={},u=a("h1",{id:"objection-初次体验",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#objection-初次体验","aria-hidden":"true"},"#"),n(" objection 初次体验")],-1),d={href:"https://bbs.kanxue.com/thread-277929.htm",target:"_blank",rel:"noopener noreferrer"},r={href:"https://www.ol4three.com/2022/03/11/Android/objection-%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/",target:"_blank",rel:"noopener noreferrer"},g=p(`<h2 id="链接" tabindex="-1"><a class="header-anchor" href="#链接" aria-hidden="true">#</a> 链接</h2><ul><li><p>我们先通过指令查到我们的包名</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell dumpsys window <span class="token operator">|</span> <span class="token function">grep</span> CurrentFocus
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>这个指令可以查到当前的窗口的包和目前的class</p></blockquote><figure><img src="https://awaqwqa.github.io/img/objection/pack_name.png" alt="pack_name" tabindex="0" loading="lazy"><figcaption>pack_name</figcaption></figure></li><li><p>执行指令<code>objection -g com.netease.x19 explore</code></p></li></ul><h2 id="初步探索" tabindex="-1"><a class="header-anchor" href="#初步探索" aria-hidden="true">#</a> 初步探索</h2><ul><li><p>使用指令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>android hooking list activities
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>获取目前加载的class 列表 然后找到我们的com.mojang.minecraftpe 进行hook</li></ul></li><li><p>hook</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>android hooking <span class="token function">watch</span> class_method com.mojang.minecraftpe.MainActivity --dump-args --dump-backtrace --dump-return
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://awaqwqa.github.io/img/objection/image-20240320105839523.png" alt="image-20240320105839523" tabindex="0" loading="lazy"><figcaption>image-20240320105839523</figcaption></figure><ul><li><p>出现了报错</p></li><li><p>哈哈哈哈 我犯蠢了 应该是class 而不是class_method</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>android hooking watch class com.mojang.minecraftpe.MainActivity --dump-args --dump-backtrace --dump-return
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><figure><img src="https://awaqwqa.github.io/img/objection/img.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure></li><li><p>调用了的函数</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">301082</span><span class="token punctuation">]</span> Called com.mojang.minecraftpe.MainActivity.isTextWidgetActive<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">301082</span><span class="token punctuation">]</span> Called com.mojang.minecraftpe.MainActivity.tick<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">301082</span><span class="token punctuation">]</span> Called com.mojang.minecraftpe.MainActivity.getCursorPosition<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">301082</span><span class="token punctuation">]</span> Called com.mojang.minecraftpe.MainActivity.nativeJsCall<span class="token punctuation">(</span>java.lang.String, com.mojang.minecraftpe.RNCallPythonRetObj<span class="token punctuation">)</span>
<span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">301082</span><span class="token punctuation">]</span> Called com.mojang.minecraftpe.MainActivity.getInstance<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">301082</span><span class="token punctuation">]</span> Called com.mojang.minecraftpe.MainActivity.setRuntimeMsg<span class="token punctuation">(</span>java.lang.String<span class="token punctuation">)</span>
<span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">301082</span><span class="token punctuation">]</span> Called com.mojang.minecraftpe.MainActivity.nativeSendMessageToJs<span class="token punctuation">(</span>java.lang.String<span class="token punctuation">)</span>
<span class="token punctuation">(</span>agent<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">301082</span><span class="token punctuation">]</span> Called com.mojang.minecraftpe.MainActivity.doesReactNativeExist<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>查看目前top顶部的activity</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell dumpsys activity <span class="token function">top</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h2 id="分析" tabindex="-1"><a class="header-anchor" href="#分析" aria-hidden="true">#</a> 分析</h2><h3 id="istextwidgetactive" tabindex="-1"><a class="header-anchor" href="#istextwidgetactive" aria-hidden="true">#</a> isTextWidgetActive</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> android hooking <span class="token function">watch</span> class_method com.mojang.minecraftpe.MainActivity.isTextWidgetActive --dump-args --dump-backtrace --dump-return
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://awaqwqa.github.io/img/objection/image-20240320113131596.png" alt="image-20240320113131596" tabindex="0" loading="lazy"><figcaption>image-20240320113131596</figcaption></figure><ul><li>这里看名字就大概知道isTextWidgetActive是检测</li><li>然后这个东西被getCursorPosition调用的</li></ul><h2 id="getcursorposition" tabindex="-1"><a class="header-anchor" href="#getcursorposition" aria-hidden="true">#</a> getCursorPosition</h2><figure><img src="https://awaqwqa.github.io/img/objection/image-20240320113426950.png" alt="image-20240320113426950" tabindex="0" loading="lazy"><figcaption>image-20240320113426950</figcaption></figure><ul><li>返回值-1</li></ul><h3 id="tick" tabindex="-1"><a class="header-anchor" href="#tick" aria-hidden="true">#</a> TICK</h3><figure><img src="https://awaqwqa.github.io/img/objection/image-20240320114400575.png" alt="image-20240320114400575" tabindex="0" loading="lazy"><figcaption>image-20240320114400575</figcaption></figure>`,14);function m(h,b){const e=t("ExternalLinkIcon");return o(),c("div",null,[u,a("blockquote",null,[a("p",null,[n("学习文章["),a("a",d,[n("分享]objection基本操作与实战-Android安全-看雪-安全社区|安全招聘|kanxue.com"),s(e)])]),a("p",null,[a("a",r,[n("objection 使用详解 - ol4three"),s(e)])])]),g])}const f=i(l,[["render",m],["__file","objection.html.vue"]]);export{f as default};
